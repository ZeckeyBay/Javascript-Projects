<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Box Game</title>

    <style>
        
        .tile {
            width: 100px;
            height: 100px;
            border: 1px solid black;
        }
        .wrapper{
            display: flex;
            flex-direction: row;
        }

        .tile.selected{
            background-color: green;
        }

        
    </style>
</head>
<body>
    <button class="box3" onClick="window.location.reload(true)">3x3</button>
    <button class ="box4" onClick="window.location.reload(true)">4x4</button>
    <button class="box5" onClick="window.location.reload(true)">5x5</button>

    <section></section>

    <script>    
        
        const section = document.getElementsByTagName("section")[0];
        let gridSize = 3;
        const numberOfTiles = gridSize ** 2;
        const clickedTiles = [];
        const btn1 = document.getElementsByClassName("box3")
        const btn2 = document.getElementsByClassName("box4")
        const btn3 = document.getElementsByClassName("box5")

        


        function setupGrid(gridSize) {
            for (let row=0; row<gridSize; row++){
            const wrapper = document.createElement("div");
            wrapper.classList.add("wrapper");
            for (let col=0; col<gridSize; col++){
                const tile = document.createElement("div");
                tile.classList.add("tile");
                wrapper.appendChild(tile);
            }
            section.appendChild(wrapper);
        }
        }
        

        function setupClickListeners(){
            document.addEventListener("click", function(){
            event.target.classList.add("selected")
            if (!event.target.classList.contains("tile")) return;
            if (clickedTiles.includes(event.target)) return;
            clickedTiles.push(event.target);

            if (clickedTiles.length >= numberOfTiles){
                const interval = setInterval(() => {
                    const tile = clickedTiles.shift();
                    tile.classList.remove("selected");
                    if (clickedTiles.length === 0){
                        clearInterval(interval);
                    }
                }, 300)
            }
        })
        }


        
        setupGrid(gridSize);
        setupClickListeners();

    </script>
</body>
</html>